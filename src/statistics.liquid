---
layout: generic
title: Eleventy Plugin Post Stats
---

{% if collections.postStats.postCount > 0 %}

  <h2>Global Statistics</h2>
  <ul>
    <li>
      <strong>First post:</strong>
      {{ collections.postStats.firstPostDate }}
    </li>
    <li>
      <strong>Last post:</strong>
      {{ collections.postStats.lastPostDate }}
    </li>
    <li>
      <strong>Post count:</strong>
      {{ collections.postStats.postCount | commaize }}
    </li>
    <li>
      <strong>Average days between posts:</strong>
      {{ collections.postStats.avgDays | commaize }}
    </li>
    <li>
      <strong>Average characters per post:</strong>
      {{ collections.postStats.avgCharacterCount | commaize }}
    </li>
    <li>
      <strong>Average words per post:</strong>
      {{ collections.postStats.avgWordCount | commaize }}
    </li>
    <li>
      <strong>Average paragraphs per post:</strong>
      {{ collections.postStats.avgParagraphCount | commaize }}
    </li>
    {%- if collections.postStats.avgCodeBlockCount > 0 -%}
      <li>
        <strong>Average code blocks per post:</strong>
        {{ collections.postStats.avgCodeBlockCount | commaize }}
      </li>
    {% endif %}
  </ul>

  <h2>Yearly Statistics</h2>
  <table>
    <thead>
      <tr>
        <th>Year</th>
        <th>Post Count</th>
        <th>Avg. Days Between Posts&nbsp;</th>
        <th>Avg. Characters</th>
        <th>Avg. Words</th>
        <th>Avg. Paragraphs</th>
        {% if collections.postStats.avgCodeBlockCount > 0 %}
          <th>Avg. Code Blocks</th>
        {%- endif -%}
      </tr>
    </thead>
    <tbody>
      {% for year in collections.postStats.years %}
        <tr>
          <td>
            <strong>{{ year.year }}</strong>
          </td>
          <td>{{ year.postCount | commaize }}</td>
          <td>{{ year.avgDays | commaize }}</td>
          <td>{{ year.avgCharacterCount | commaize }}</td>
          <td>{{ year.avgParagraphCount | commaize }}</td>
          <td>{{ year.avgWordCount | commaize }}</td>
          {%- if collections.postStats.avgCodeBlockCount > 0 -%}
            <td>{{ year.avgCodeBlockCount | commaize }}</td>
          {%- endif -%}
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <h2>Post Statistics</h2>
  <div class="chart-container">
    <canvas id="statsChart1"></canvas>
  </div>
  <h2>Content Statistics</h2>
  <div class="chart-container">
    <canvas id="statsChart2"></canvas>
  </div>

{% else %}
  <p>
    <strong>No data to display</strong>
  </p>
{% endif %}

<!-- Chart Scripts -->

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx1 = document.getElementById('statsChart1');
  new Chart(ctx1, {
    data: {
      labels: [{% for year in collections.postStats.years %}'{{ year.year }}'{%- unless forloop.last %},{% endunless %}{% endfor %}],
    datasets: [
      {
        type: 'bar',
        label: 'Number of Posts',
        data: [{% for year in collections.postStats.years %}{{ year.postCount }}{%- unless forloop.last %},{% endunless %}{% endfor %}],
        borderWidth: 1,
        order: 1
      }, {
        type: 'line',
        label: 'Yearly Average Number of Days Between Posts',
        data: [{% for year in collections.postStats.years %}{{ year.avgDays }}{%- unless forloop.last %},{% endunless %}{% endfor %}],
        lineTension: 0.8,
        order: 2
      }, {
        type: 'line',
        label: 'Site Average Number of Days Between Posts',
        data: [{% for year in collections.postStats.years %}{{ collections.postStats.avgDays | commaize }}{%- unless forloop.last %},{% endunless %}{% endfor %}],
        lineTension: 0.8,
        order: 3
      }
    ]
  },
  options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  }
});
</script>

<script>
  const ctx2 = document.getElementById('statsChart2');
  new Chart(ctx2, {
    data: {
      labels: [{% for year in collections.postStats.years %}'{{ year.year }}'{%- unless forloop.last %},{% endunless %}{% endfor %}],
    datasets: [
      {
        type: 'bar',
        label: 'Avg. Characters per Post',
        data: [{% for year in collections.postStats.years %}{{ year.avgCharacterCount }}{%- unless forloop.last %},{% endunless %}{% endfor %}],
        borderWidth: 1,
        order: 1
      }, {
        type: 'line',
        label: 'Avg. Words per Post',
        data: [{% for year in collections.postStats.years %}{{ year.avgWordCount }}{%- unless forloop.last %},{% endunless %}{% endfor %}],
        borderWidth: 1,
        order: 2
      }, {
        type: 'line',
        label: 'Avg. Paragraphs per Post',
        data: [{% for year in collections.postStats.years %}{{ year.avgParagraphCount }}{%- unless forloop.last %},{% endunless %}{% endfor %}],
        borderWidth: 1,
        order: 3
      }
      {% if collections.postStats.avgCodeBlockCount > 0 %}, {
          type: 'line',
          label: 'Avg. Code Blocks per Post',
          data: [{% for year in collections.postStats.years %}{{ year.avgCodeBlockCount }}{%- unless forloop.last %},{% endunless %}{% endfor %}],
          order: 4
        }
      {% endif %}
    ]
  },
  options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  }
});
</script>